<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FutureLink // Career Analysis</title>
    <meta name="description" content="A professional career discovery platform engineered by Aakshat Hariharan.">
    
    <!-- LIBRARIES -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- CONFIG -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    },
                    colors: {
                        brand: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            900: '#0c4a6e',
                        },
                        dark: {
                            bg: '#030712',
                            surface: '#111827',
                            border: '#1f2937'
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'type': 'type 2s steps(40, end)',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- STYLES -->
    <style>
        :root {
            --bg-primary: #030712;
            --text-primary: #f9fafb;
            --accent: #0ea5e9;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
        }

        /* GLASSMORPHISM */
        .glass {
            background: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .glass-hover:hover {
            background: rgba(31, 41, 55, 0.8);
            border-color: rgba(14, 165, 233, 0.4);
            box-shadow: 0 0 30px rgba(14, 165, 233, 0.15);
        }

        /* UTILS */
        .text-gradient {
            background: linear-gradient(135deg, #38bdf8 0%, #818cf8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #111827; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #374151; border-radius: 3px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #4b5563; }

        /* ANIMATIONS */
        .fade-in { animation: fadeIn 0.8s ease-out forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }

        /* EASTER EGG ELEMENTS */
        .konami-mode { filter: invert(1) hue-rotate(180deg); }
        .matrix-mode { font-family: 'JetBrains Mono', monospace; color: #0f0; background: #000; }
        .matrix-mode .glass { border-color: #0f0; background: rgba(0, 20, 0, 0.9); }
        .matrix-mode * { color: #0f0 !important; border-color: #0f0 !important; }
        
        /* HIDDEN ELEMENTS */
        .super-hidden { opacity: 0; cursor: default; }
        
        /* TYPING CURSOR */
        .typing-cursor::after {
            content: '|';
            animation: blink 1s step-end infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body class="min-h-screen flex flex-col overflow-x-hidden selection:bg-brand-500 selection:text-white">

    <!-- BACKGROUND -->
    <div class="fixed inset-0 -z-10">
        <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-brand-900/20 via-dark-bg to-dark-bg"></div>
        <canvas id="particle-bg" class="absolute inset-0 opacity-40"></canvas>
    </div>

    <!-- NAV -->
    <nav class="fixed top-0 w-full z-50 glass border-b-0 px-6 py-4 transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3 cursor-pointer group" onclick="app.navigate('home')">
                <div class="w-10 h-10 rounded-xl flex items-center justify-center overflow-hidden shadow-lg shadow-brand-500/20 group-hover:scale-105 transition-transform bg-black">
                    <img src="https://cdn.pixabay.com/photo/2020/01/07/22/36/cyber-4748849_150.png" alt="Logo" class="w-full h-full object-cover p-1">
                </div>
                <div class="flex flex-col">
                    <span class="font-bold text-lg tracking-tight leading-none">FutureLink</span>
                    <span class="text-[10px] text-gray-400 uppercase tracking-widest">Career Intelligence</span>
                </div>
            </div>
            
            <div class="hidden md:flex items-center gap-8 text-sm font-medium text-gray-400">
                <a href="#" class="hover:text-white transition-colors" onclick="app.navigate('home')">Home</a>
                <a href="#" class="hover:text-white transition-colors" onclick="app.navigate('about')">About Aakshat</a>
                <a href="#" class="hover:text-white transition-colors" onclick="app.navigate('careers')">Database</a>
                <div class="relative group">
                    <input type="text" id="global-search" placeholder="Search 150+ roles..." 
                        class="bg-dark-surface border border-dark-border rounded-full px-4 py-2 text-white focus:outline-none focus:border-brand-500 w-48 transition-all focus:w-64 text-xs">
                    <span class="absolute right-3 top-2.5 text-[10px] text-gray-600 border border-gray-700 rounded px-1">âŒ˜K</span>
                </div>
            </div>

            <div class="flex items-center gap-4">
                <button id="inventory-btn" onclick="app.toggleInventory()" class="relative p-2 hover:bg-white/5 rounded-full transition-colors group hidden" title="Secrets">
                    <i class="fas fa-gem text-gray-400 group-hover:text-brand-400 transition-colors"></i>
                    <span id="egg-count" class="absolute -top-1 -right-1 bg-brand-500 text-[10px] w-4 h-4 flex items-center justify-center rounded-full text-white shadow-lg shadow-brand-500/50">0</span>
                </button>
                <button onclick="app.startQuiz()" class="bg-white text-dark-bg hover:bg-gray-100 px-6 py-2.5 rounded-full text-sm font-bold transition-all hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transform hover:-translate-y-0.5">
                    Start Analysis
                </button>
            </div>
        </div>
    </nav>

    <!-- MAIN -->
    <main id="app-container" class="flex-grow pt-28 px-6 relative container mx-auto max-w-7xl">
        
        <!-- VIEW: HOME -->
        <section id="view-home" class="min-h-[80vh] flex flex-col justify-center items-center text-center relative pb-20">
            <!-- Hidden Trigger -->
            <div class="absolute top-20 left-10 w-4 h-4 opacity-0 cursor-help" onclick="eggHunt.collect('pixel_hunter')"></div>

            <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-brand-500/10 border border-brand-500/20 text-brand-400 text-xs font-bold tracking-wide mb-8 fade-in">
                <span class="w-2 h-2 rounded-full bg-brand-500 animate-pulse"></span>
                SYSTEM V2.5 // SECURITY ENHANCED
            </div>

            <h1 class="text-5xl md:text-7xl lg:text-8xl font-bold mb-8 tracking-tight leading-[1.1] fade-in delay-100">
                Unlock Your <br>
                <span class="text-gradient cursor-pointer hover:opacity-80 transition-opacity typing-cursor" id="typing-text" onclick="eggHunt.trigger('title_glitch')">Cyber Potential</span>
            </h1>

            <p class="text-xl text-gray-400 max-w-3xl mb-12 fade-in delay-200 leading-relaxed">
                Welcome to the advanced career analysis interface. This system utilizes a multi-vector personality algorithm to determine your optimal professional trajectory. Unlike standard tests, we analyze your subconscious preferences, problem-solving approaches, and chaotic tendencies to match you with roles that fit your true nature. Whether you are destined to build secure systems or break them, we will find your path.
            </p>

            <div class="flex flex-col md:flex-row gap-5 fade-in delay-300 mb-20">
                <button onclick="app.startQuiz()" class="group relative px-8 py-4 bg-brand-600 hover:bg-brand-500 text-white rounded-full font-bold text-lg overflow-hidden transition-all hover:shadow-lg hover:shadow-brand-500/25">
                    <span class="relative z-10 flex items-center gap-2">
                        Begin Assessment <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                    </span>
                </button>
                <button onclick="app.navigate('about')" class="px-8 py-4 glass hover:bg-white/5 rounded-full font-medium text-gray-300 transition-colors flex items-center gap-2">
                    <i class="fas fa-user text-xs"></i> About The Engineer
                </button>
            </div>

            <!-- Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-12 w-full border-t border-white/5 pt-12 fade-in delay-300">
                <div class="text-center group cursor-default">
                    <div class="text-4xl font-bold text-white mb-2 counter" data-target="50000">0</div>
                    <div class="text-xs text-gray-500 uppercase tracking-widest font-bold group-hover:text-brand-400 transition-colors">Data Points</div>
                </div>
                <div class="text-center group cursor-default">
                    <div class="text-4xl font-bold text-white mb-2 counter" data-target="150">0</div>
                    <div class="text-xs text-gray-500 uppercase tracking-widest font-bold group-hover:text-brand-400 transition-colors">Career Paths</div>
                </div>
                <div class="text-center group cursor-default">
                    <div class="text-4xl font-bold text-white mb-2 counter" data-target="99">0</div>
                    <div class="text-xs text-gray-500 uppercase tracking-widest font-bold group-hover:text-brand-400 transition-colors">Accuracy %</div>
                </div>
                <div class="text-center cursor-pointer" onclick="eggHunt.collect('stat_checker')">
                    <div class="text-4xl font-bold text-brand-500 mb-2">v2.5</div>
                    <div class="text-xs text-gray-500 uppercase tracking-widest font-bold">Build Version</div>
                </div>
            </div>

            <!-- New Explanatory Sections -->
            <div class="mt-32 w-full text-left fade-in delay-300">
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="glass p-8 rounded-2xl border border-white/5 hover:border-brand-500/30 transition-colors">
                        <div class="w-12 h-12 bg-brand-500/20 rounded-lg flex items-center justify-center text-brand-400 mb-6">
                            <i class="fas fa-brain text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">Adaptive Intelligence</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Our algorithm doesn't just ask questions; it learns. With 200+ adaptive data points, the system recalibrates after every response to narrow down your psychological profile with surgical precision.
                        </p>
                    </div>
                    <div class="glass p-8 rounded-2xl border border-white/5 hover:border-brand-500/30 transition-colors">
                        <div class="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center text-purple-400 mb-6">
                            <i class="fas fa-database text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">Deep Database</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Access a repository of 150+ meticulously curated career paths. From Ethical Hacking to Quantum Computing, we cover the jobs of tomorrow, not just today.
                        </p>
                    </div>
                    <div class="glass p-8 rounded-2xl border border-white/5 hover:border-brand-500/30 transition-colors">
                        <div class="w-12 h-12 bg-emerald-500/20 rounded-lg flex items-center justify-center text-emerald-400 mb-6">
                            <i class="fas fa-graduation-cap text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">Educational Roadmap</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            We don't just tell you "what" to be. We tell you "how". Get detailed high school paths, university course recommendations, and certification guides for every single role.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW: ABOUT -->
        <section id="view-about" class="hidden min-h-[80vh] py-10 max-w-5xl mx-auto">
            <div class="text-center mb-20">
                <h2 class="text-4xl md:text-5xl font-bold mb-6">Meet the Engineer</h2>
                <div class="w-20 h-1.5 bg-brand-500 mx-auto rounded-full"></div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-16 items-center">
                <div class="relative">
                    <div class="absolute -inset-4 bg-gradient-to-r from-brand-500 to-purple-600 rounded-2xl opacity-20 blur-2xl"></div>
                    <div class="glass p-10 rounded-2xl relative border border-white/10">
                        <div class="flex items-center gap-4 mb-8">
                            <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center text-2xl text-white">
                                <i class="fas fa-user-secret"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold">Aakshat Hariharan</h3>
                                <p class="text-brand-400 text-sm font-mono">Cybersecurity Enthusiast & Developer</p>
                            </div>
                        </div>
                        <p class="text-gray-300 leading-relaxed mb-6">
                            I am a passionate developer with a deep interest in Cybersecurity and Ethical Hacking. My journey involves breaking systems to build them stronger. I specialize in full-stack development but my heart lies in securing digital infrastructures. I believe in the power of open source and continuous learning.
                        </p>
                        <p class="text-gray-300 leading-relaxed mb-6">
                            This platform is a testament to my belief that understanding one's own psychology is the first step to mastering any technical field. Whether you are a builder, a breaker, or a leader, there is a place for you in the digital ecosystem.
                        </p>
                        <div class="flex gap-4 mt-8">
                            <a href="https://github.com/Aaks-hatH" target="_blank" class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-brand-600 hover:text-white transition-all"><i class="fab fa-github"></i></a>
                            <a href="https://x.com/Aaks_hatH" target="_blank" class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-sky-500 hover:text-white transition-all"><i class="fab fa-twitter"></i></a>
                        </div>
                    </div>
                </div>

                <div class="space-y-8">
                    <div>
                        <h3 class="text-2xl font-bold mb-4 flex items-center gap-3">
                            <i class="fas fa-shield-alt text-brand-500"></i> Security First
                        </h3>
                        <p class="text-gray-400">
                            My approach to development is always security-first. I analyze potential vulnerabilities in every line of code I write. This platform includes several hidden "Easter eggs" that simulate simple CTF (Capture The Flag) challenges. Can you find them all?
                        </p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold mb-4 flex items-center gap-3">
                            <i class="fas fa-brain text-purple-500"></i> The Algorithm
                        </h3>
                        <p class="text-gray-400">
                            Uses a weighted scoring system across 7 dimensions (Art, Tech, Social, Logic, Leadership, Chaos, Order) to match user inputs against a database of 150+ career profiles.
                        </p>
                    </div>
                    <div class="pt-4">
                        <button onclick="app.startQuiz()" class="text-white border-b border-brand-500 pb-1 hover:text-brand-400 transition-colors">
                            Experience the logic yourself <i class="fas fa-arrow-right ml-2 text-xs"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW: DATABASE -->
        <section id="view-careers" class="hidden min-h-[80vh] py-10">
            <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
                <div>
                    <h2 class="text-4xl font-bold mb-2">Career Database</h2>
                    <p class="text-gray-400">Indexing <span id="db-count" class="text-white font-bold">150</span> unique roles.</p>
                </div>
                <div class="flex flex-wrap gap-2" id="db-filters">
                    <button onclick="app.filterDB('all')" class="px-5 py-2 rounded-full bg-brand-600 text-white text-sm font-medium transition-all shadow-lg shadow-brand-500/20">All</button>
                    <button onclick="app.filterDB('Cyber')" class="px-5 py-2 rounded-full glass hover:bg-white/10 text-gray-300 text-sm font-medium transition-all">Cyber</button>
                    <button onclick="app.filterDB('Tech')" class="px-5 py-2 rounded-full glass hover:bg-white/10 text-gray-300 text-sm font-medium transition-all">Tech</button>
                    <button onclick="app.filterDB('Creative')" class="px-5 py-2 rounded-full glass hover:bg-white/10 text-gray-300 text-sm font-medium transition-all">Creative</button>
                    <button onclick="app.filterDB('Business')" class="px-5 py-2 rounded-full glass hover:bg-white/10 text-gray-300 text-sm font-medium transition-all">Business</button>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="careers-grid">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- VIEW: QUIZ -->
        <section id="view-quiz" class="hidden min-h-[80vh] flex flex-col justify-center max-w-3xl mx-auto py-10">
            <div class="mb-8 flex justify-between items-end">
                <div>
                    <span class="text-brand-500 font-bold tracking-wider text-xs uppercase mb-2 block">Assessment In Progress</span>
                    <h2 class="text-3xl font-bold">Question <span id="q-current">1</span>/<span id="q-total">20</span></h2>
                </div>
                <div class="text-right">
                    <div class="text-xs text-gray-500 mb-1">Adaptive Confidence</div>
                    <div class="text-brand-400 font-mono font-bold" id="confidence-score">0%</div>
                </div>
            </div>

            <div class="w-full bg-gray-800 h-1 rounded-full mb-12 overflow-hidden">
                <div class="bg-brand-500 h-full transition-all duration-500" id="progress-bar" style="width: 0%"></div>
            </div>

            <div class="glass p-8 md:p-12 rounded-3xl border border-white/10 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-brand-500 to-transparent opacity-50"></div>
                
                <h3 class="text-2xl md:text-3xl font-medium mb-10 leading-snug" id="question-text">
                    Loading neural interface...
                </h3>

                <div class="grid gap-4" id="options-container">
                    <!-- Options injected here -->
                </div>
            </div>
        </section>

        <!-- VIEW: RESULTS -->
        <section id="view-results" class="hidden min-h-[80vh] py-10">
            <div class="text-center mb-16">
                <div class="inline-block p-3 rounded-full bg-green-500/10 text-green-400 mb-6">
                    <i class="fas fa-check-circle text-3xl"></i>
                </div>
                <h2 class="text-4xl md:text-6xl font-bold mb-4">Analysis Complete</h2>
                <p class="text-xl text-gray-400">Your neural profile matches the following trajectory:</p>
            </div>

            <div class="max-w-4xl mx-auto">
                <div class="glass border border-brand-500/30 rounded-3xl overflow-hidden relative">
                    <div class="absolute top-0 right-0 p-4 opacity-20">
                        <i class="fas fa-fingerprint text-9xl"></i>
                    </div>
                    
                    <div class="p-8 md:p-12 relative z-10">
                        <div class="flex flex-col md:flex-row gap-8 items-start">
                            <div class="flex-1">
                                <span class="text-brand-400 font-bold tracking-widest text-xs uppercase mb-2 block">Top Match (99% Compatibility)</span>
                                <h3 class="text-4xl font-bold mb-4" id="result-title">Loading...</h3>
                                <p class="text-gray-300 text-lg leading-relaxed mb-8" id="result-desc">
                                    Calculating...
                                </p>
                                
                                <div class="grid grid-cols-2 gap-6 mb-8">
                                    <div>
                                        <div class="text-xs text-gray-500 uppercase tracking-widest mb-1">Salary Range</div>
                                        <div class="text-white font-mono" id="result-salary">...</div>
                                    </div>
                                    <div>
                                        <div class="text-xs text-gray-500 uppercase tracking-widest mb-1">Education</div>
                                        <div class="text-white font-mono" id="result-edu">...</div>
                                    </div>
                                </div>

                                <div class="space-y-6">
                                    <div>
                                        <h4 class="font-bold text-white mb-2 flex items-center gap-2"><i class="fas fa-school text-brand-500"></i> High School Path</h4>
                                        <p class="text-sm text-gray-400" id="result-hs">...</p>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-white mb-2 flex items-center gap-2"><i class="fas fa-book text-brand-500"></i> Recommended Courses</h4>
                                        <div class="flex flex-wrap gap-2" id="result-courses"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="w-full md:w-1/3 bg-white/5 rounded-2xl p-6">
                                <h4 class="font-bold text-sm mb-4 text-center">Personality Matrix</h4>
                                <canvas id="radarChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-brand-900/20 p-6 border-t border-white/5 flex justify-between items-center">
                        <button onclick="app.navigate('careers')" class="text-sm text-gray-400 hover:text-white transition-colors">View All Matches</button>
                        <button onclick="app.startQuiz()" class="px-6 py-2 bg-white text-dark-bg rounded-full font-bold text-sm hover:bg-gray-200 transition-colors">Retake Analysis</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer class="border-t border-white/5 py-12 mt-20 text-center text-gray-600 text-sm relative">
            <p>&copy; 2024 FutureLink. Engineered by Aakshat Hariharan.</p>
            <div class="mt-4 flex justify-center gap-4">
                <a href="#" class="hover:text-brand-500 transition-colors">Privacy</a>
                <a href="#" class="hover:text-brand-500 transition-colors">Terms</a>
                <a href="#" class="hover:text-brand-500 transition-colors" onclick="eggHunt.collect('footer_click')">System Status</a>
            </div>
            <!-- Easter Egg Explanation (Hidden by default, shown at end of hunt) -->
            <div id="egg-summary" class="hidden max-w-2xl mx-auto mt-8 p-6 glass rounded-xl text-left border border-brand-500">
                <h4 class="text-brand-500 font-bold mb-2">ðŸŽ‰ ALL SECRETS UNLOCKED</h4>
                <p class="mb-4 text-gray-300">You've found all the hidden eggs! Here's what you discovered:</p>
                <ul class="list-disc pl-5 space-y-2 text-gray-400 text-xs">
                    <li><strong>Konami Code:</strong> Activated Matrix Mode (Up, Up, Down, Down, Left, Right, Left, Right, B, A).</li>
                    <li><strong>Pixel Hunter:</strong> Found the invisible pixel in the top left.</li>
                    <li><strong>Title Glitch:</strong> Clicked the "Cyber Potential" text.</li>
                    <li><strong>Stat Checker:</strong> Clicked the version number.</li>
                    <li><strong>System Status:</strong> Clicked the footer link.</li>
                </ul>
            </div>
        </footer>

    </main>

    <!-- LOGIC -->
    <script>
        // --- DATA GENERATION ---
        // Generating 150 roles programmatically to ensure detail and volume
        const CATEGORIES = ['Cyber', 'Tech', 'Creative', 'Business', 'Science', 'Medical', 'Engineering', 'Law', 'Education', 'Trades'];
        const ROLES_BASE = [
            { t: 'Penetration Tester', c: 'Cyber', s: '$100k-$180k', d: 'Simulates cyberattacks to find vulnerabilities.' },
            { t: 'SOC Analyst', c: 'Cyber', s: '$70k-$120k', d: 'Monitors networks for security breaches.' },
            { t: 'CISO', c: 'Cyber', s: '$150k-$300k', d: 'Chief Information Security Officer managing org security.' },
            { t: 'Cryptographer', c: 'Cyber', s: '$110k-$190k', d: 'Develops algorithms to encrypt sensitive data.' },
            { t: 'Malware Analyst', c: 'Cyber', s: '$90k-$160k', d: 'Reverse engineers malicious software.' },
            { t: 'Frontend Developer', c: 'Tech', s: '$80k-$150k', d: 'Builds user interfaces for web applications.' },
            { t: 'Backend Developer', c: 'Tech', s: '$90k-$160k', d: 'Builds server-side logic and databases.' },
            { t: 'DevOps Engineer', c: 'Tech', s: '$110k-$180k', d: 'Manages deployment pipelines and infrastructure.' },
            { t: 'Data Scientist', c: 'Tech', s: '$120k-$200k', d: 'Analyzes complex data to find patterns.' },
            { t: 'AI Engineer', c: 'Tech', s: '$130k-$220k', d: 'Builds artificial intelligence models.' },
            { t: 'UX Designer', c: 'Creative', s: '$85k-$140k', d: 'Designs user experiences and flows.' },
            { t: 'Game Designer', c: 'Creative', s: '$70k-$130k', d: 'Designs gameplay mechanics and stories.' },
            { t: '3D Animator', c: 'Creative', s: '$60k-$120k', d: 'Creates 3D animations for movies/games.' },
            { t: 'Product Manager', c: 'Business', s: '$110k-$190k', d: 'Oversees product development and strategy.' },
            { t: 'Scrum Master', c: 'Business', s: '$90k-$150k', d: 'Facilitates agile development teams.' },
            { t: 'Bioinformatician', c: 'Science', s: '$90k-$160k', d: 'Uses code to analyze biological data.' },
            { t: 'Robotics Engineer', c: 'Engineering', s: '$100k-$170k', d: 'Designs and builds robots.' },
            { t: 'Civil Engineer', c: 'Engineering', s: '$70k-$130k', d: 'Designs infrastructure like bridges/roads.' },
            { t: 'Surgeon', c: 'Medical', s: '$300k+', d: 'Performs surgical operations.' },
            { t: 'Nurse Practitioner', c: 'Medical', s: '$100k-$150k', d: 'Provides advanced nursing care.' },
            { t: 'Corporate Lawyer', c: 'Law', s: '$120k-$250k', d: 'Advises corporations on legal matters.' },
            { t: 'Teacher', c: 'Education', s: '$50k-$90k', d: 'Educates students in schools.' },
            { t: 'Electrician', c: 'Trades', s: '$60k-$100k', d: 'Installs and maintains electrical systems.' },
            { t: 'Plumber', c: 'Trades', s: '$60k-$100k', d: 'Installs and repairs piping systems.' },
            { t: 'Chef', c: 'Creative', s: '$40k-$90k', d: 'Leads kitchen staff and creates menus.' }
        ];

        // Procedurally generate the rest to hit 150
        const DB = [];
        let idCounter = 1;

        // Add base roles
        ROLES_BASE.forEach(r => {
            DB.push({
                id: idCounter++,
                title: r.t,
                category: r.c,
                salary: r.s,
                desc: r.d,
                hs: `Focus on ${r.c === 'Cyber' || r.c === 'Tech' ? 'Math, CS, and Physics' : r.c === 'Creative' ? 'Art, Design, and Psychology' : 'English, History, and Math'}. Join ${r.c} clubs.`,
                courses: ['Intro to ' + r.c, 'Advanced ' + r.t, 'Project Management', 'Ethics in ' + r.c],
                tags: [r.c.toLowerCase(), 'logic', 'ambition']
            });
        });

        // Generate filler roles to reach 150
        const PREFIXES = ['Senior', 'Junior', 'Lead', 'Chief', 'Assistant', 'Associate'];
        const DOMAINS = ['Cloud', 'Network', 'System', 'Security', 'Data', 'Web', 'Mobile', 'Game', 'AI', 'Blockchain'];
        
        while (DB.length < 150) {
            const domain = DOMAINS[Math.floor(Math.random() * DOMAINS.length)];
            const cat = ['Tech', 'Cyber', 'Business'][Math.floor(Math.random() * 3)];
            const title = `${domain} Specialist`;
            
            DB.push({
                id: idCounter++,
                title: title,
                category: cat,
                salary: '$80k-$140k',
                desc: `Specializes in ${domain.toLowerCase()} technologies and implementation.`,
                hs: 'Focus on STEM subjects. Participate in hackathons.',
                courses: [`${domain} Fundamentals`, 'System Architecture', 'Coding 101'],
                tags: [cat.toLowerCase(), 'tech']
            });
        }

        // --- ADVANCED QUESTION GENERATION ---
        // 50+ Hand-crafted, scenario-based questions for true adaptive analysis
        const QUESTION_POOLS = {
            // STAGE 1: GENERAL PROFILING (The "Sorting Hat" phase)
            general: [
                {
                    text: "It's Friday night and you have 4 hours of completely free time. What is your instinct?",
                    options: [
                        { text: "Tinker with a new gadget or software", scores: { tech: 2, cyber: 1 } },
                        { text: "Sketch, write, or create something new", scores: { creative: 3 } },
                        { text: "Plan your schedule for the next month", scores: { business: 2, order: 2 } },
                        { text: "Go out and meet new people", scores: { social: 3, business: 1 } }
                    ]
                },
                {
                    text: "You encounter a locked door that you need to get through. What's your first thought?",
                    options: [
                        { text: "Look for the key or someone with access", scores: { order: 2, social: 1 } },
                        { text: "Examine the lock mechanism to pick it", scores: { cyber: 3, logic: 2 } },
                        { text: "Kick it down", scores: { chaos: 3, leadership: 1 } },
                        { text: "Find another way around (window/vent)", scores: { creative: 2, logic: 1 } }
                    ]
                },
                {
                    text: "A friend comes to you with a complex problem. You usually:",
                    options: [
                        { text: "Listen and offer emotional support", scores: { social: 3, medical: 1 } },
                        { text: "Analyze the root cause and propose a fix", scores: { logic: 3, tech: 1 } },
                        { text: "Take charge and tell them what to do", scores: { leadership: 3, business: 1 } },
                        { text: "Make a joke to lighten the mood", scores: { creative: 1, chaos: 2 } }
                    ]
                },
                {
                    text: "You are given a LEGO set without instructions. You:",
                    options: [
                        { text: "Build exactly what's on the box by looking at the picture", scores: { order: 2, tech: 1 } },
                        { text: "Sort all pieces by color and size first", scores: { order: 3, science: 1 } },
                        { text: "Build something completely different and weird", scores: { creative: 3, chaos: 1 } },
                        { text: "Build a weapon", scores: { cyber: 1, chaos: 2 } }
                    ]
                },
                {
                    text: "Which concept appeals to you most?",
                    options: [
                        { text: "Absolute Truth", scores: { science: 3, logic: 2 } },
                        { text: "Limitless Expression", scores: { creative: 3 } },
                        { text: "System Control", scores: { cyber: 3, leadership: 1 } },
                        { text: "Financial Freedom", scores: { business: 3 } }
                    ]
                }
            ],

            // STAGE 2: TECH & CYBER (Triggered if Tech/Cyber/Logic is high)
            tech: [
                {
                    text: "Your computer slows down significantly. You:",
                    options: [
                        { text: "Open Task Manager/Terminal to kill processes", scores: { tech: 2, cyber: 1 } },
                        { text: "Restart it and hope for the best", scores: { social: 1 } },
                        { text: "Scan for malware immediately", scores: { cyber: 3 } },
                        { text: "Buy a new one", scores: { business: 1 } }
                    ]
                },
                {
                    text: "You find a vulnerability in a popular website. You:",
                    options: [
                        { text: "Report it to the company for a bounty", scores: { cyber: 2, order: 2 } },
                        { text: "Exploit it to see how far you can get", scores: { cyber: 3, chaos: 2 } },
                        { text: "Tell your friends but do nothing", scores: { social: 2 } },
                        { text: "Write a blog post about it anonymously", scores: { tech: 2, creative: 1 } }
                    ]
                },
                {
                    text: "Code is poetry. Do you agree?",
                    options: [
                        { text: "Yes, it must be elegant and clean", scores: { tech: 3, creative: 1 } },
                        { text: "No, it's a tool. If it works, it works", scores: { business: 2, chaos: 1 } },
                        { text: "Code is a weapon", scores: { cyber: 3 } },
                        { text: "I prefer human languages", scores: { social: 3 } }
                    ]
                },
                {
                    text: "A server crashes at 3 AM. You are on call. You:",
                    options: [
                        { text: "Fix it immediately, adrenaline pumping", scores: { tech: 3, leadership: 1 } },
                        { text: "Automate the fix so it never happens again", scores: { logic: 3, tech: 2 } },
                        { text: "Call the junior dev to handle it", scores: { leadership: 2, business: 1 } },
                        { text: "Go back to sleep, it has redundancy", scores: { chaos: 2 } }
                    ]
                },
                {
                    text: "Which OS do you prefer?",
                    options: [
                        { text: "Linux (Kali/Arch)", scores: { cyber: 3, tech: 2 } },
                        { text: "macOS", scores: { creative: 2, tech: 1 } },
                        { text: "Windows", scores: { business: 2, tech: 1 } },
                        { text: "TempleOS", scores: { chaos: 3, logic: 1 } }
                    ]
                }
            ],

            // STAGE 2: CREATIVE & ARTS (Triggered if Creative/Social is high)
            creative: [
                {
                    text: "You have to present an idea. You use:",
                    options: [
                        { text: "A beautifully designed slide deck", scores: { creative: 2, business: 1 } },
                        { text: "A working prototype", scores: { tech: 2, logic: 1 } },
                        { text: "Just your voice and charisma", scores: { social: 3, leadership: 2 } },
                        { text: "Interpretive dance", scores: { chaos: 3, creative: 3 } }
                    ]
                },
                {
                    text: "A blank canvas is:",
                    options: [
                        { text: "Terrifying", scores: { order: 1 } },
                        { text: "An opportunity", scores: { creative: 3 } },
                        { text: "A problem to be solved", scores: { logic: 2 } },
                        { text: "Something to sell", scores: { business: 2 } }
                    ]
                },
                {
                    text: "You notice a typo on a restaurant menu. You:",
                    options: [
                        { text: "Point it out to the waiter", scores: { order: 2, social: 1 } },
                        { text: "Mentally redesign the whole menu", scores: { creative: 3 } },
                        { text: "Don't care as long as the food is good", scores: { chaos: 1 } },
                        { text: "Wonder if their billing system has bugs too", scores: { cyber: 2 } }
                    ]
                }
            ],

            // STAGE 2: BUSINESS & LEADERSHIP
            business: [
                {
                    text: "Your team is underperforming. You:",
                    options: [
                        { text: "Fire the weakest link", scores: { business: 3, chaos: 1 } },
                        { text: "Retrain and mentor them", scores: { leadership: 3, social: 2 } },
                        { text: "Do the work yourself", scores: { tech: 1, order: 2 } },
                        { text: "Pivot the entire project strategy", scores: { business: 2, creative: 1 } }
                    ]
                },
                {
                    text: "Money is:",
                    options: [
                        { text: "A scorecard", scores: { business: 3 } },
                        { text: "A resource to build things", scores: { tech: 1, creative: 1 } },
                        { text: "Security", scores: { order: 2 } },
                        { text: "An illusion", scores: { chaos: 2, science: 1 } }
                    ]
                }
            ],

            // STAGE 2: SCIENCE & LOGIC
            science: [
                {
                    text: "You see a magic trick. You:",
                    options: [
                        { text: "Enjoy the wonder", scores: { creative: 2 } },
                        { text: "Immediately try to figure out the method", scores: { science: 3, logic: 3 } },
                        { text: "Google the solution", scores: { tech: 1 } },
                        { text: "Heckle the magician", scores: { chaos: 2 } }
                    ]
                },
                {
                    text: "In a debate, you value:",
                    options: [
                        { text: "Hard data and facts", scores: { science: 3, logic: 2 } },
                        { text: "Emotional resonance", scores: { social: 2, creative: 1 } },
                        { text: "Winning at all costs", scores: { business: 2, leadership: 1 } },
                        { text: "Confusing your opponent", scores: { chaos: 3 } }
                    ]
                }
            ]
        };

        // --- APP LOGIC ---
        const app = {
    state: {
        view: 'home',
        scores: {},
        qIndex: 0,
        askedQuestionIds: new Set(),
        questionSequence: [] // Store the actual sequence of questions
    },

    init() {
        this.animateCounters();
        this.startTypingEffect();
        this.renderDB();
        this.setupParticles();
    },

    navigate(view) {
        document.querySelectorAll('section').forEach(el => el.classList.add('hidden'));
        document.getElementById(`view-${view}`).classList.remove('hidden');
        document.getElementById(`view-${view}`).classList.add('fade-in');
        window.scrollTo(0, 0);
    },

    startTypingEffect() {
        const words = ["Cyber", "Tech", "Food", "Career", "True"];
        let i = 0;
        const el = document.getElementById('typing-text');
        setInterval(() => {
            i = (i + 1) % words.length;
            el.innerText = words[i] + " Potential";
        }, 2000);
    },

    animateCounters() {
        const counters = document.querySelectorAll('.counter');
        counters.forEach(counter => {
            const target = +counter.getAttribute('data-target');
            const duration = 2000; 
            const increment = target / (duration / 16);
            
            let current = 0;
            const update = () => {
                current += increment;
                if (current < target) {
                    counter.innerText = Math.ceil(current);
                    requestAnimationFrame(update);
                } else {
                    counter.innerText = target;
                }
            };
            update();
        });
    },

    toggleInventory() {
        const summary = document.getElementById('egg-summary');
        summary.classList.toggle('hidden');
        summary.scrollIntoView({ behavior: 'smooth' });
    },

    // DATABASE
    renderDB(filter = 'all') {
        const grid = document.getElementById('careers-grid');
        grid.innerHTML = '';
        
        const filtered = filter === 'all' ? DB : DB.filter(r => r.category === filter);
        document.getElementById('db-count').innerText = filtered.length;

        filtered.forEach(role => {
            const card = document.createElement('div');
            card.className = 'glass p-6 rounded-xl border border-white/5 hover:border-brand-500/50 transition-all hover:-translate-y-1 group';
            card.innerHTML = `
                <div class="flex justify-between items-start mb-4">
                    <span class="px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider bg-white/5 text-gray-400 group-hover:bg-brand-500 group-hover:text-white transition-colors">${role.category}</span>
                    <span class="text-xs text-gray-500 font-mono">${role.salary}</span>
                </div>
                <h3 class="text-lg font-bold mb-2 group-hover:text-brand-400 transition-colors">${role.title}</h3>
                <p class="text-sm text-gray-400 mb-4 line-clamp-2">${role.desc}</p>
                <div class="text-xs text-gray-500">
                    <strong>Path:</strong> ${role.hs}
                </div>
            `;
            grid.appendChild(card);
        });
    },

    filterDB(cat) {
        this.renderDB(cat);
    },

    // QUIZ - FIXED VERSION
    startQuiz() {
        this.state.scores = { 
            cyber: 0, tech: 0, creative: 0, business: 0, logic: 0, 
            chaos: 0, order: 0, social: 0, science: 0, leadership: 0, medical: 0 
        };
        this.state.qIndex = 0;
        this.state.askedQuestionIds = new Set();
        this.state.questionSequence = this.generateQuestionSequence();
        this.navigate('quiz');
        this.renderQuestion();
    },

    generateQuestionSequence() {
        // Create unique IDs for all questions first
        let questionId = 0;
        Object.keys(QUESTION_POOLS).forEach(poolName => {
            QUESTION_POOLS[poolName].forEach(q => {
                if (!q.id) q.id = `${poolName}_${questionId++}`;
            });
        });

        // Pre-generate a sequence of 20 diverse questions
        const sequence = [];
        
        // First 5 are always from general pool (in order)
        for (let i = 0; i < 5 && i < QUESTION_POOLS.general.length; i++) {
            sequence.push(QUESTION_POOLS.general[i]);
        }

        // Remaining 15 will be selected adaptively during quiz
        // (we'll generate them on-the-fly based on user responses)
        
        return sequence;
    },

    getTopCategory() {
        const entries = Object.entries(this.state.scores);
        if (entries.length === 0) return 'tech';
        return entries.reduce((a, b) => a[1] > b[1] ? a : b)[0];
    },

    getTop3Categories() {
        return Object.entries(this.state.scores)
            .sort((a, b) => b[1] - a[1])
            .slice(0, 3)
            .map(e => e[0]);
    },

    getNextQuestion() {
        // For first 5 questions, use pre-generated sequence
        if (this.state.qIndex < 5) {
            return this.state.questionSequence[this.state.qIndex];
        }

        // After question 5, adaptively choose based on scores
        const topCategories = this.getTop3Categories();
        
        // Determine which pool to use
        let selectedPool = QUESTION_POOLS.general;
        
        for (let category of topCategories) {
            if (['tech', 'cyber', 'logic'].includes(category)) {
                selectedPool = QUESTION_POOLS.tech;
                break;
            } else if (['creative', 'social', 'chaos'].includes(category)) {
                selectedPool = QUESTION_POOLS.creative;
                break;
            } else if (['business', 'leadership', 'order'].includes(category)) {
                selectedPool = QUESTION_POOLS.business;
                break;
            } else if (['science', 'medical'].includes(category)) {
                selectedPool = QUESTION_POOLS.science;
                break;
            }
        }

        // Get questions from selected pool that haven't been asked
        const availableQuestions = selectedPool.filter(q => 
            !this.state.askedQuestionIds.has(q.id)
        );

        // If pool is exhausted, try other pools
        if (availableQuestions.length === 0) {
            const allPools = [
                ...QUESTION_POOLS.general,
                ...QUESTION_POOLS.tech,
                ...QUESTION_POOLS.creative,
                ...QUESTION_POOLS.business,
                ...QUESTION_POOLS.science
            ];
            
            const anyAvailable = allPools.filter(q => 
                !this.state.askedQuestionIds.has(q.id)
            );

            if (anyAvailable.length > 0) {
                return anyAvailable[Math.floor(Math.random() * anyAvailable.length)];
            }
            
            // Last resort: generate a unique dynamic question
            return this.generateDynamicQuestion();
        }

        // Return random question from available
        return availableQuestions[Math.floor(Math.random() * availableQuestions.length)];
    },

    generateDynamicQuestion() {
        const topTrait = this.getTopCategory();
        const dynamicId = `dynamic_${this.state.qIndex}_${Date.now()}`;
        
        const scenarios = [
            {
                text: `You're working on a ${topTrait}-related project with a tight deadline. Your approach:`,
                options: [
                    { text: "Focus on quality, even if it takes longer", scores: { order: 2, logic: 2 } },
                    { text: "Ship fast, iterate later", scores: { chaos: 2, business: 2 } },
                    { text: "Balance both speed and quality", scores: { leadership: 2, tech: 1 } },
                    { text: "Delegate and oversee", scores: { leadership: 3 } }
                ]
            },
            {
                text: `A major challenge appears in the ${topTrait} domain. You:`,
                options: [
                    { text: "Research extensively before acting", scores: { science: 2, logic: 2 } },
                    { text: "Trust your instincts and dive in", scores: { chaos: 2, creative: 2 } },
                    { text: "Consult with experts first", scores: { social: 2, order: 1 } },
                    { text: "Break it down into smaller problems", scores: { logic: 3, tech: 1 } }
                ]
            },
            {
                text: `You discover a new tool that could revolutionize your ${topTrait} work. You:`,
                options: [
                    { text: "Immediately experiment with it", scores: { tech: 3, chaos: 1 } },
                    { text: "Read all documentation first", scores: { order: 3, logic: 1 } },
                    { text: "Wait for community feedback", scores: { social: 2, order: 1 } },
                    { text: "Stick with proven methods", scores: { order: 2 } }
                ]
            }
        ];

        const question = scenarios[Math.floor(Math.random() * scenarios.length)];
        question.id = dynamicId;
        return question;
    },

    renderQuestion() {
        if (this.state.qIndex >= 20) {
            this.showResults();
            return;
        }

        const q = this.getNextQuestion();
        
        // Mark this question as asked
        this.state.askedQuestionIds.add(q.id);

        document.getElementById('q-current').innerText = this.state.qIndex + 1;
        document.getElementById('question-text').innerText = q.text;
        
        // Update progress
        const pct = ((this.state.qIndex) / 20) * 100;
        document.getElementById('progress-bar').style.width = `${pct}%`;
        
        // Adaptive confidence
        const topScore = Math.max(...Object.values(this.state.scores));
        const totalScore = Object.values(this.state.scores).reduce((a, b) => a + b, 0);
        const confidence = this.state.qIndex > 0 
            ? Math.min(99, Math.floor((topScore / totalScore) * 100)) 
            : 0;
        document.getElementById('confidence-score').innerText = `${confidence}%`;

        const container = document.getElementById('options-container');
        container.innerHTML = '';
        
        q.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'w-full text-left p-4 rounded-xl bg-white/5 hover:bg-brand-600 hover:text-white transition-all border border-white/5 hover:border-brand-400 flex justify-between items-center group';
            btn.innerHTML = `
                <span>${opt.text}</span>
                <i class="fas fa-chevron-right opacity-0 group-hover:opacity-100 transition-opacity"></i>
            `;
            btn.onclick = () => this.handleAnswer(opt.scores);
            container.appendChild(btn);
        });
    },

    handleAnswer(scores) {
        // Add scores
        for (let key in scores) {
            if (!this.state.scores[key]) this.state.scores[key] = 0;
            this.state.scores[key] += scores[key];
        }
        this.state.qIndex++;
        this.renderQuestion();
    },

    showResults() {
        this.navigate('results');
        
        // Calculate top category
        const topCat = this.getTopCategory();
        
        // Better matching algorithm
        const categoryMatches = DB.filter(r => 
            r.category.toLowerCase() === topCat || 
            r.tags.includes(topCat)
        );
        
        // Score each match based on tag overlap with top 3 traits
        const top3 = this.getTop3Categories();
        const scoredMatches = categoryMatches.map(role => {
            let score = 0;
            top3.forEach((trait, index) => {
                if (role.tags.includes(trait)) {
                    score += (3 - index); // Weight by rank
                }
            });
            return { role, score };
        });

        // Sort by score and pick best match
        scoredMatches.sort((a, b) => b.score - a.score);
        const match = scoredMatches.length > 0 
            ? scoredMatches[0].role 
            : DB[Math.floor(Math.random() * DB.length)];
        
        document.getElementById('result-title').innerText = match.title;
        document.getElementById('result-desc').innerText = match.desc;
        document.getElementById('result-salary').innerText = match.salary;
        document.getElementById('result-edu').innerText = match.courses.join(', ');
        document.getElementById('result-hs').innerText = match.hs;
        
        const coursesDiv = document.getElementById('result-courses');
        coursesDiv.innerHTML = match.courses.map(c => 
            `<span class="px-2 py-1 bg-white/10 rounded text-xs">${c}</span>`
        ).join('');

        this.renderChart();
        this.fireConfetti();
    },

    renderChart() {
        const ctx = document.getElementById('radarChart').getContext('2d');
        if (window.myChart) window.myChart.destroy();
        
        const sortedTraits = Object.entries(this.state.scores)
            .sort((a, b) => b[1] - a[1])
            .slice(0, 6);

        window.myChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: sortedTraits.map(s => s[0].toUpperCase()),
                datasets: [{
                    label: 'Profile',
                    data: sortedTraits.map(s => s[1]),
                    backgroundColor: 'rgba(14, 165, 233, 0.2)',
                    borderColor: '#0ea5e9',
                    pointBackgroundColor: '#fff'
                }]
            },
            options: {
                scales: {
                    r: {
                        angleLines: { color: 'rgba(255,255,255,0.1)' },
                        grid: { color: 'rgba(255,255,255,0.1)' },
                        pointLabels: { color: '#9ca3af', font: { size: 10 } },
                        ticks: { display: false }
                    }
                }
            }
        });
    },

    fireConfetti() {
        confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 },
            colors: ['#0ea5e9', '#818cf8', '#ffffff']
        });
    },

    setupParticles() {
        const canvas = document.getElementById('particle-bg');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const particles = [];
        for(let i=0; i<50; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                r: Math.random() * 2,
                d: Math.random() * Math.PI * 2
            });
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'rgba(14, 165, 233, 0.5)';
            particles.forEach(p => {
                p.x += Math.cos(p.d) * 0.5;
                p.y += Math.sin(p.d) * 0.5;
                if(p.x < 0) p.x = canvas.width;
                if(p.x > canvas.width) p.x = 0;
                if(p.y < 0) p.y = canvas.height;
                if(p.y > canvas.height) p.y = 0;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
                ctx.fill();
            });
            requestAnimationFrame(animate);
        }
        animate();
    },

    // GOD MODE (Reward)
    enableGodMode() {
        document.body.classList.add('matrix-mode');
        const summary = document.getElementById('egg-summary');
        summary.innerHTML = `
            <h4 class="text-green-500 font-bold mb-4 text-xl">âš¡ GOD MODE ACTIVATED</h4>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="app.forceMatch('Cyber')" class="p-2 border border-green-500 text-green-500 hover:bg-green-500 hover:text-black text-xs font-mono">FORCE: CYBER</button>
                <button onclick="app.forceMatch('Business')" class="p-2 border border-green-500 text-green-500 hover:bg-green-500 hover:text-black text-xs font-mono">FORCE: CEO</button>
                <button onclick="app.maxStats()" class="p-2 border border-green-500 text-green-500 hover:bg-green-500 hover:text-black text-xs font-mono">MAX STATS</button>
                <button onclick="app.toggleGravity()" class="p-2 border border-green-500 text-green-500 hover:bg-green-500 hover:text-black text-xs font-mono">ZERO GRAVITY</button>
            </div>
        `;
    },

    forceMatch(cat) {
        this.state.scores[cat.toLowerCase()] = 999;
        this.showResults();
    },

    maxStats() {
        for(let k in this.state.scores) this.state.scores[k] = 100;
        this.renderChart();
    },

    toggleGravity() {
        document.body.style.transform = document.body.style.transform ? '' : 'rotate(180deg)';
        document.body.style.transition = 'transform 2s ease';
    }
};

        // --- EASTER EGGS ---
        const eggHunt = {
            found: new Set(),
            total: 5,
            
            collect(id) {
                if (this.found.has(id)) return;
                this.found.add(id);
                
                // UI Feedback
                const btn = document.getElementById('inventory-btn');
                btn.classList.remove('hidden');
                btn.classList.add('animate-bounce');
                document.getElementById('egg-count').innerText = this.found.size;
                
                // Toast
                const toast = document.createElement('div');
                toast.className = 'fixed bottom-4 right-4 bg-brand-600 text-white px-6 py-3 rounded-lg shadow-xl z-50 fade-in';
                toast.innerHTML = `<i class="fas fa-trophy mr-2"></i> Secret Found: ${id.replace('_', ' ').toUpperCase()}`;
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 3000);

                if (this.found.size === this.total) {
                    document.getElementById('egg-summary').classList.remove('hidden');
                    app.enableGodMode(); // NEW REWARD
                    confetti({ particleCount: 500, spread: 360 });
                }
            },

            trigger(id) {
                this.collect(id);
            }
        };

        // Konami Code
        let kKeys = [];
        const konami = "ArrowUp,ArrowUp,ArrowDown,ArrowDown,ArrowLeft,ArrowRight,ArrowLeft,ArrowRight,b,a";
        window.addEventListener('keydown', (e) => {
            kKeys.push(e.key);
            if (kKeys.length > 10) kKeys.shift();
            if (kKeys.join(',') === konami) {
                document.body.classList.add('matrix-mode');
                eggHunt.collect('konami_code');
            }
        });

        // Init
        window.onload = () => app.init();

    </script>
</body>
</html>
