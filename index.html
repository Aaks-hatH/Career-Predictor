<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FutureLink // My Career Project</title>
    <meta name="description" content="A personal project to help you find your path.">
    
    <!-- LIBRARIES -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- STYLES -->
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --accent: #3b82f6;
            --accent-glow: rgba(59, 130, 246, 0.5);
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --terminal-green: #22c55e;
            --terminal-bg: #0c0c0c;
        }

        /* THEMES */
        [data-theme="cyber"] {
            --bg-primary: #050505;
            --bg-secondary: #0a0a0a;
            --accent: #00ff9d;
            --accent-glow: rgba(0, 255, 157, 0.3);
            --text-primary: #e0e0e0;
            font-family: 'JetBrains Mono', monospace;
        }

        [data-theme="retro"] {
            --bg-primary: #2b213a;
            --bg-secondary: #43345b;
            --accent: #ff00ff;
            --accent-glow: rgba(255, 0, 255, 0.4);
            --text-primary: #fff0f5;
            font-family: 'Courier New', monospace;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Space Grotesk', sans-serif;
            transition: all 0.5s ease;
            overflow-x: hidden;
            cursor: crosshair;
        }

        /* UTILS */
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .neon-border {
            box-shadow: 0 0 10px var(--accent-glow), inset 0 0 5px var(--accent-glow);
            border-color: var(--accent);
        }

        .scanline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--accent);
            opacity: 0.1;
            animation: scan 4s linear infinite;
            pointer-events: none;
            z-index: 9999;
        }

        @keyframes scan { 0% { top: -10%; } 100% { top: 110%; } }

        /* ANIMATIONS */
        .fade-in-up { animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        .glitch-text:hover {
            animation: glitch 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
            color: var(--accent);
        }
        @keyframes glitch {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }

        /* TERMINAL */
        #terminal-overlay {
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        #terminal-overlay.open { transform: translateY(0); }

        /* EASTER EGG NOTIFICATION */
        .egg-toast {
            animation: slideInRight 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* CUSTOM SCROLLBAR */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-primary); }
        ::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #fff; }

        .hidden-trigger { opacity: 0; pointer-events: auto; }
    </style>
</head>
<body class="min-h-screen flex flex-col selection:bg-blue-500 selection:text-white">

    <!-- AUDIO ASSETS -->
    <audio id="sfx-hover" src="data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU..."></audio> 

    <!-- BACKGROUND CANVAS -->
    <canvas id="neural-bg" class="fixed top-0 left-0 w-full h-full -z-10 opacity-30"></canvas>
    <div class="scanline"></div>

    <!-- NAVIGATION -->
    <nav class="fixed top-0 w-full z-50 glass border-b border-white/5 px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-3 group cursor-pointer" onclick="app.navigate('home')">
            <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center text-white font-bold text-xl group-hover:rotate-180 transition-transform duration-500">F</div>
            <span class="font-bold text-xl tracking-tight">Future<span class="text-blue-500">Link</span></span>
        </div>
        
        <div class="hidden md:flex items-center gap-8 text-sm font-medium text-gray-400">
            <a href="#" class="hover:text-white transition-colors" onclick="app.navigate('home')">Home</a>
            <a href="#" class="hover:text-white transition-colors" onclick="app.navigate('about')">My Mission</a>
            <a href="#" class="hover:text-white transition-colors" onclick="app.navigate('careers')">The Database</a>
            <div class="relative">
                <input type="text" id="global-search" placeholder="Search my system..." 
                    class="bg-slate-800/50 border border-slate-700 rounded-full px-4 py-1.5 text-white focus:outline-none focus:border-blue-500 w-48 transition-all focus:w-64 text-xs font-mono">
                <div class="absolute right-3 top-2 text-xs text-slate-500">âŒ˜K</div>
            </div>
        </div>

        <div class="flex items-center gap-4">
            <button id="inventory-btn" class="relative p-2 hover:bg-white/10 rounded-full transition-colors" title="Artifacts">
                <i class="fas fa-cube text-gray-400"></i>
                <span id="egg-count" class="absolute -top-1 -right-1 bg-blue-600 text-[10px] w-4 h-4 flex items-center justify-center rounded-full text-white hidden">0</span>
            </button>
            <button onclick="app.startQuiz()" class="bg-blue-600 hover:bg-blue-500 text-white px-5 py-2 rounded-full text-sm font-semibold transition-all hover:shadow-[0_0_20px_rgba(37,99,235,0.5)]">
                Start Analysis
            </button>
        </div>
    </nav>

    <!-- MAIN CONTENT AREA -->
    <main id="app-container" class="flex-grow pt-24 px-6 relative container mx-auto max-w-6xl">
        
        <!-- VIEW: LANDING -->
        <section id="view-home" class="min-h-[80vh] flex flex-col justify-center items-center text-center relative">
            <div class="absolute top-10 right-10 w-20 h-20 border border-dashed border-white/20 rounded-full animate-spin-slow hidden-trigger" onclick="eggHunt.collect('spin_doctor')"></div>
            
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-mono mb-8 fade-in-up" style="animation-delay: 0.1s">
                <span class="w-2 h-2 rounded-full bg-blue-500 animate-pulse"></span>
                SYSTEM ONLINE // V9.1.0
            </div>

            <h1 class="text-6xl md:text-8xl font-bold mb-6 tracking-tight leading-tight fade-in-up" style="animation-delay: 0.2s">
                I Built This To Find Your <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 glitch-text cursor-pointer" onclick="eggHunt.trigger('title_glitch')">True Calling</span>
            </h1>

            <p class="text-xl text-gray-400 max-w-2xl mb-10 fade-in-up" style="animation-delay: 0.3s">
                I was tired of generic career tests, so I coded my own. My adaptive algorithm analyzes 50+ cognitive dimensions to predict where you actually belong.
            </p>

            <div class="flex gap-4 fade-in-up" style="animation-delay: 0.4s">
                <button onclick="app.startQuiz()" class="group relative px-8 py-4 bg-white text-slate-900 rounded-full font-bold text-lg overflow-hidden transition-all hover:scale-105">
                    <div class="absolute inset-0 w-full h-full bg-gradient-to-r from-blue-400 via-purple-400 to-blue-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    <span class="relative z-10 flex items-center gap-2">
                        Let Me Analyze You <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                    </span>
                </button>
                <button onclick="terminal.toggle()" class="px-8 py-4 border border-white/10 rounded-full font-medium hover:bg-white/5 transition-colors text-gray-300 font-mono text-sm">
                    >_ ACCESS_MY_TERMINAL
                </button>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mt-24 w-full border-t border-white/5 pt-12 fade-in-up" style="animation-delay: 0.6s">
                <div class="text-center">
                    <div class="text-3xl font-bold text-white mb-1 counter" data-target="2048">0</div>
                    <div class="text-xs text-gray-500 uppercase tracking-wider">Data Points I Track</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-white mb-1 counter" data-target="25">0</div>
                    <div class="text-xs text-gray-500 uppercase tracking-wider">Roles I Added</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-white mb-1 counter" data-target="99">0</div>
                    <div class="text-xs text-gray-500 uppercase tracking-wider">% Accuracy Goal</div>
                </div>
                <div class="text-center cursor-pointer" onclick="eggHunt.collect('stat_checker')">
                    <div class="text-3xl font-bold text-blue-500 mb-1">v9.1</div>
                    <div class="text-xs text-gray-500 uppercase tracking-wider">My Build Version</div>
                </div>
            </div>
        </section>

        <!-- VIEW: MISSION (ABOUT) -->
        <section id="view-about" class="hidden min-h-[80vh] py-10 max-w-4xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-bold mb-6">My Mission</h2>
                <div class="w-24 h-1 bg-blue-500 mx-auto rounded-full"></div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="space-y-6 text-lg text-gray-300 leading-relaxed">
                    <p>
                        <span class="text-blue-400 font-bold text-xl">Hi, I'm the developer.</span> 
                        I created FutureLink because I believe standard career advice is broken. It focuses on "what you can do" instead of "who you are."
                    </p>
                    <p>
                        I spent months researching cognitive patterns and tech industry roles to build a database that actually makes sense. This isn't just a random quizâ€”it's a reflection of my understanding of the modern tech landscape.
                    </p>
                    <p>
                        My goal is simple: to help you find a career that doesn't just pay the bills, but actually feels like <em>play</em> to you.
                    </p>
                    <div class="pt-4">
                        <button onclick="app.startQuiz()" class="text-blue-400 hover:text-white font-bold underline decoration-blue-500/30 hover:decoration-blue-500 transition-all">
                            Ready to see what I built for you?
                        </button>
                    </div>
                </div>
                <div class="glass p-8 rounded-2xl border border-white/10 relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <div class="font-mono text-sm text-blue-300 mb-4">// SYSTEM_MANIFESTO.md</div>
                    <ul class="space-y-4 font-mono text-sm text-gray-400">
                        <li class="flex items-center gap-3">
                            <i class="fas fa-check text-green-400"></i> <span>Reject generic advice</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-check text-green-400"></i> <span>Embrace chaos & creativity</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-check text-green-400"></i> <span>Code is poetry</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-check text-green-400"></i> <span>Data over intuition</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- VIEW: DATABASE (CAREERS) -->
        <section id="view-careers" class="hidden min-h-[80vh] py-10">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold mb-4">The Database</h2>
                <p class="text-gray-400">All the roles I've programmed into the system so far.</p>
            </div>

            <div class="flex flex-wrap justify-center gap-2 mb-8" id="db-filters">
                <button onclick="app.filterDB('all')" class="px-4 py-1 rounded-full bg-blue-600 text-white text-sm">All</button>
                <button onclick="app.filterDB('tech')" class="px-4 py-1 rounded-full bg-white/5 hover:bg-white/10 text-gray-300 text-sm">Tech</button>
                <button onclick="app.filterDB('art')" class="px-4 py-1 rounded-full bg-white/5 hover:bg-white/10 text-gray-300 text-sm">Creative</button>
                <button onclick="app.filterDB('lead')" class="px-4 py-1 rounded-full bg-white/5 hover:bg-white/10 text-gray-300 text-sm">Leadership</button>
            </div>

            <div id="careers-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Injected via JS -->
            </div>
        </section>

        <!-- VIEW: QUIZ INTERFACE -->
        <section id="view-quiz" class="hidden min-h-[80vh] flex flex-col items-center justify-center max-w-3xl mx-auto">
            <!-- Progress -->
            <div class="w-full mb-12">
                <div class="flex justify-between text-xs text-gray-400 mb-2 font-mono">
                    <span>ANALYSIS PROGRESS</span>
                    <span id="progress-text">0%</span>
                </div>
                <div class="h-1 w-full bg-slate-800 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-gradient-to-r from-blue-500 to-purple-500 w-0 transition-all duration-500"></div>
                </div>
            </div>

            <!-- Question Card -->
            <div id="question-card" class="w-full glass p-8 md:p-12 rounded-2xl border border-white/10 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-1 h-full bg-blue-500"></div>
                
                <span id="q-category" class="inline-block px-3 py-1 rounded bg-blue-500/10 text-blue-400 text-xs font-bold tracking-wider mb-6">ANALYSIS PHASE 1</span>
                
                <h2 id="q-text" class="text-2xl md:text-4xl font-bold mb-10 leading-snug">Initializing...</h2>

                <div id="options-container" class="grid gap-4">
                    <!-- Options injected here -->
                </div>
            </div>

            <div class="mt-8 flex justify-between w-full text-sm text-gray-500 font-mono">
                <button onclick="app.navigate('home')" class="hover:text-white transition-colors">ABORT MISSION</button>
                <span id="q-id">ID: NULL</span>
            </div>
        </section>

        <!-- VIEW: LOADING/PROCESSING -->
        <section id="view-loading" class="hidden min-h-[80vh] flex flex-col items-center justify-center">
            <div class="relative w-32 h-32 mb-8">
                <div class="absolute inset-0 border-4 border-slate-800 rounded-full"></div>
                <div class="absolute inset-0 border-4 border-t-blue-500 border-r-transparent border-b-purple-500 border-l-transparent rounded-full animate-spin"></div>
                <div class="absolute inset-4 bg-slate-800 rounded-full flex items-center justify-center font-mono text-xs text-blue-400 animate-pulse">
                    MY AI
                </div>
            </div>
            <h2 class="text-2xl font-bold mb-2">Synthesizing Your Profile</h2>
            <p id="loading-text" class="text-gray-400 font-mono text-sm">Comparing your answers against my database...</p>
        </section>

        <!-- VIEW: RESULTS -->
        <section id="view-results" class="hidden py-10">
            <div class="grid md:grid-cols-12 gap-8">
                <!-- Left Col: Profile -->
                <div class="md:col-span-4 space-y-6">
                    <div class="glass p-6 rounded-2xl border border-white/10 text-center">
                        <div class="w-24 h-24 mx-auto bg-gradient-to-br from-blue-500 to-purple-600 rounded-full p-1 mb-4">
                            <div class="w-full h-full bg-slate-900 rounded-full flex items-center justify-center text-3xl">
                                ðŸ§ 
                            </div>
                        </div>
                        <h2 class="text-xl font-bold mb-1">I Identified You As A</h2>
                        <div id="archetype-name" class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400 mb-4">
                            Digital Architect
                        </div>
                        <p id="archetype-desc" class="text-sm text-gray-400 leading-relaxed">
                            You possess a rare blend of analytical precision and creative vision.
                        </p>
                    </div>

                    <div class="glass p-6 rounded-2xl border border-white/10">
                        <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">Your Trait Signature</h3>
                        <canvas id="radar-chart"></canvas>
                    </div>
                </div>

                <!-- Right Col: Matches -->
                <div class="md:col-span-8 space-y-6">
                    <div class="flex justify-between items-end mb-4">
                        <h2 class="text-3xl font-bold">My Recommendations</h2>
                        <button onclick="window.print()" class="text-sm text-blue-400 hover:text-white"><i class="fas fa-download mr-2"></i>Save Report</button>
                    </div>

                    <div id="career-matches" class="space-y-4">
                        <!-- Matches injected here -->
                    </div>

                    <div class="glass p-8 rounded-2xl border border-dashed border-white/10 mt-8 text-center">
                        <h3 class="text-lg font-bold mb-2">Not what you expected?</h3>
                        <p class="text-gray-400 text-sm mb-4">My algorithm is constantly learning. Try answering differently.</p>
                        <button onclick="app.reset()" class="px-6 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-sm transition-colors">Restart My Analysis</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW: INVENTORY (Modal) -->
        <div id="inventory-modal" class="fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm hidden flex items-center justify-center opacity-0 transition-opacity duration-300">
            <div class="bg-slate-900 border border-white/10 w-full max-w-2xl rounded-2xl p-8 transform scale-95 transition-transform duration-300 shadow-2xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold font-mono text-blue-400">> MY_ARTIFACTS</h2>
                    <button onclick="app.toggleInventory()" class="text-gray-400 hover:text-white"><i class="fas fa-times text-xl"></i></button>
                </div>
                <div id="inventory-grid" class="grid grid-cols-4 md:grid-cols-5 gap-4">
                    <!-- Eggs injected here -->
                </div>
                <div class="mt-6 pt-6 border-t border-white/5 text-center">
                    <p class="text-xs text-gray-500 font-mono">COLLECT ALL 12 SECRETS I HID TO UNLOCK GOD MODE</p>
                </div>
            </div>
        </div>

    </main>

    <!-- TERMINAL OVERLAY (CTF LAYER) -->
    <div id="terminal-overlay" class="fixed inset-0 z-[200] bg-[#0c0c0c] text-[#22c55e] font-mono p-4 md:p-10 flex flex-col">
        <div class="flex justify-between items-center mb-4 border-b border-[#22c55e]/30 pb-2">
            <div class="text-sm">ROOT@FUTURELINK:~#</div>
            <button onclick="terminal.toggle()" class="text-[#22c55e] hover:text-white">[X] CLOSE_CONNECTION</button>
        </div>
        <div id="terminal-output" class="flex-grow overflow-y-auto mb-4 space-y-1 text-sm md:text-base custom-scroll">
            <div class="opacity-50">Initializing secure shell...</div>
            <div class="opacity-50">Connected to 192.168.X.X</div>
            <br>
            <div>Welcome to My Admin Console.</div>
            <div>Type 'help' for available commands.</div>
            <br>
        </div>
        <div class="flex gap-2 items-center">
            <span class="text-blue-500">âžœ</span>
            <input type="text" id="terminal-input" class="bg-transparent border-none focus:outline-none text-[#22c55e] w-full font-bold" autocomplete="off" spellcheck="false" autofocus>
        </div>
    </div>

    <!-- BOSS MODE OVERLAY -->
    <div id="boss-mode" style="display: none; position: fixed; inset: 0; background: #fff; z-index: 9999; font-family: Arial, sans-serif; color: #000;">
        <div style="background: #217346; color: white; padding: 4px 10px; font-size: 12px; display: flex; gap: 20px;">
            <span>AutoSave: On</span> <span>File</span> <span>Home</span> <span>Insert</span> <span>Data</span>
        </div>
        <div style="background: #f3f2f1; padding: 8px; border-bottom: 1px solid #e1dfdd; font-size: 11px;">
            Arial v 10 v B I U
        </div>
        <div style="display: grid; grid-template-columns: 40px repeat(5, 1fr); gap: 1px; background: #e1dfdd; padding-bottom: 1px;">
            <div style="background: #f3f2f1;"></div>
            <div style="background: #f3f2f1; text-align: center; padding: 2px;">A</div>
            <div style="background: #f3f2f1; text-align: center; padding: 2px;">B</div>
            <div style="background: #f3f2f1; text-align: center; padding: 2px;">C</div>
            <div style="background: #f3f2f1; text-align: center; padding: 2px;">D</div>
            <div style="background: #f3f2f1; text-align: center; padding: 2px;">E</div>
            
            <div style="background: #f3f2f1; text-align: center;">1</div>
            <div style="background: white; padding: 2px;">Q3 Financials</div>
            <div style="background: white; padding: 2px;"></div>
            <div style="background: white; padding: 2px;"></div>
            <div style="background: white; padding: 2px;"></div>
            <div style="background: white; padding: 2px;"></div>
            
            <div style="background: #f3f2f1; text-align: center;">2</div>
            <div style="background: white; padding: 2px;">Revenue</div>
            <div style="background: white; padding: 2px;">$1,200,000</div>
            <div style="background: white; padding: 2px;">$1,450,000</div>
            <div style="background: white; padding: 2px;">$1,100,000</div>
            <div style="background: white; padding: 2px;"></div>

            <div style="background: #f3f2f1; text-align: center;">3</div>
            <div style="background: white; padding: 2px;">Expenses</div>
            <div style="background: white; padding: 2px;">$800,000</div>
            <div style="background: white; padding: 2px;">$850,000</div>
            <div style="background: white; padding: 2px;">$900,000</div>
            <div style="background: white; padding: 2px;"></div>
        </div>
        <div style="position: absolute; bottom: 10px; right: 10px; font-size: 10px; color: #666;">Press ESC to exit</div>
    </div>

    <!-- NOTIFICATIONS -->
    <div id="toast-container" class="fixed bottom-8 right-8 z-[300] flex flex-col gap-3 pointer-events-none"></div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATABASE ---
        const DB = {
            questions: [
                // CREATIVE
                { id: 'c1', text: "I give you a blank canvas. What's your first move?", category: 'Creative', weights: { art: 3, tech: 0, lead: 0 }, options: [
                    { text: "Sketch a chaotic abstract concept", weights: { art: 2, chaos: 1 } },
                    { text: "Plan a geometric grid structure", weights: { art: 1, tech: 1, order: 2 } },
                    { text: "Ask someone what they want to see", weights: { social: 2, lead: 1 } }
                ]},
                { id: 'c2', text: "My project is failing. How do you fix it?", category: 'Problem Solving', weights: { lead: 2, tech: 1 }, options: [
                    { text: "Redesign the core visual identity", weights: { art: 3 } },
                    { text: "Analyze the data to find the bottleneck", weights: { tech: 2, logic: 2 } },
                    { text: "Rally the team for a brainstorm", weights: { social: 3, lead: 2 } }
                ]},
                { id: 'c3', text: "You need to explain a complex idea to me. You use...", category: 'Communication', weights: { social: 1 }, options: [
                    { text: "A detailed technical diagram", weights: { tech: 2, logic: 1 } },
                    { text: "A relatable metaphor or story", weights: { social: 2, art: 1 } },
                    { text: "A bulleted list of action items", weights: { order: 2, lead: 1 } }
                ]},
                { id: 'c4', text: "Your ideal workspace looks like...", category: 'Environment', weights: {}, options: [
                    { text: "A messy studio full of inspiration", weights: { art: 2, chaos: 2 } },
                    { text: "A silent room with three monitors", weights: { tech: 2, logic: 1 } },
                    { text: "A bustling cafe with people watching", weights: { social: 2, chaos: 1 } }
                ]},
                // TECH
                { id: 't1', text: "You discover a bug in my app. You...", category: 'Technical', weights: { tech: 3 }, options: [
                    { text: "Ignore it, not my problem", weights: { chaos: 1 } },
                    { text: "Write a script to exploit it", weights: { tech: 3, chaos: 2 } },
                    { text: "Report it to me detailedly", weights: { tech: 1, social: 1, order: 2 } }
                ]},
                { id: 't2', text: "Choose a superpower:", category: 'Personality', weights: {}, options: [
                    { text: "Control machines with your mind", weights: { tech: 3 } },
                    { text: "Persuade anyone to do anything", weights: { social: 3, lead: 2 } },
                    { text: "Create matter from thin air", weights: { art: 3 } }
                ]},
                { id: 't3', text: "New technology is released. You...", category: 'Adaptability', weights: { tech: 2 }, options: [
                    { text: "Wait for the reviews", weights: { logic: 1, order: 1 } },
                    { text: "Pre-order it immediately", weights: { tech: 2, chaos: 1 } },
                    { text: "Build your own version instead", weights: { tech: 3, art: 1 } }
                ]},
                // LEADERSHIP
                { id: 'l1', text: "Your team is arguing over two good ideas. You...", category: 'Leadership', weights: { lead: 3 }, options: [
                    { text: "Pick the one that's most practical", weights: { logic: 2, order: 1 } },
                    { text: "Combine them into a hybrid solution", weights: { art: 1, lead: 2 } },
                    { text: "Let them vote and accept the outcome", weights: { social: 2, lead: 1 } }
                ]},
                { id: 'l2', text: "Success is defined by...", category: 'Values', weights: { lead: 1 }, options: [
                    { text: "The impact on the world", weights: { social: 2, lead: 1 } },
                    { text: "The elegance of the solution", weights: { art: 1, logic: 1 } },
                    { text: "The efficiency of the process", weights: { order: 2, tech: 1 } }
                ]},
                // LOGIC
                { id: 'g1', text: "A complex machine breaks down. Your reaction?", category: 'Logic', weights: { logic: 3 }, options: [
                    { text: "Take it apart to see how it works", weights: { tech: 2, logic: 2 } },
                    { text: "Read the manual cover to cover", weights: { order: 3, logic: 1 } },
                    { text: "Call support and complain", weights: { social: 1, chaos: 1 } }
                ]},
                { id: 'g2', text: "You prefer games that involve...", category: 'Hobbies', weights: {}, options: [
                    { text: "Strategy and resource management", weights: { logic: 2, order: 1 } },
                    { text: "Reflexes and fast action", weights: { chaos: 1, tech: 1 } },
                    { text: "Roleplaying and character depth", weights: { art: 1, social: 2 } }
                ]},
                // SOCIAL
                { id: 's1', text: "At a party, you are usually...", category: 'Social', weights: { social: 3 }, options: [
                    { text: "In the center telling stories", weights: { social: 3, lead: 1 } },
                    { text: "Observing people from the corner", weights: { art: 1, logic: 1 } },
                    { text: "Fixing the broken sound system", weights: { tech: 2 } }
                ]},
                { id: 's2', text: "A friend is sad. You...", category: 'Empathy', weights: { social: 2 }, options: [
                    { text: "Offer practical solutions to their problem", weights: { logic: 2, tech: 1 } },
                    { text: "Just listen and offer a hug", weights: { social: 3 } },
                    { text: "Distract them with a fun activity", weights: { chaos: 1, art: 1 } }
                ]},
                // WORK STYLE
                { id: 'x1', text: "The deadline is tomorrow. You haven't started.", category: 'Work Style', weights: { order: 2 }, options: [
                    { text: "Pull an all-nighter, coffee IV", weights: { chaos: 2, tech: 1 } },
                    { text: "Negotiate an extension", weights: { social: 2, lead: 1 } },
                    { text: "Submit what you have, it's 'minimalist'", weights: { art: 2, chaos: 1 } }
                ]},
                { id: 'x2', text: "Money or Meaning?", category: 'Values', weights: {}, options: [
                    { text: "Money to fund my projects", weights: { tech: 1, lead: 1 } },
                    { text: "Meaning to feed my soul", weights: { art: 2, social: 2 } },
                    { text: "A balanced portfolio of both", weights: { logic: 2, order: 1 } }
                ]},
                { id: 'x3', text: "Your desktop is...", category: 'Organization', weights: { order: 2 }, options: [
                    { text: "Empty, everything in folders", weights: { order: 3, logic: 1 } },
                    { text: "Covered in files, but I know where everything is", weights: { chaos: 2, art: 1 } },
                    { text: "I use a search bar for everything", weights: { tech: 2 } }
                ]},
                // NEW QUESTIONS
                { id: 'n1', text: "You're learning a new skill. You prefer...", category: 'Learning', weights: { logic: 1 }, options: [
                    { text: "Watching video tutorials", weights: { art: 1, social: 1 } },
                    { text: "Reading the documentation", weights: { logic: 2, order: 1 } },
                    { text: "Just building something and failing", weights: { chaos: 2, tech: 1 } }
                ]},
                { id: 'n2', text: "Your code/design isn't working. You...", category: 'Resilience', weights: {}, options: [
                    { text: "Walk away and clear your head", weights: { social: 1, art: 1 } },
                    { text: "Grind it out until it works", weights: { tech: 2, order: 1 } },
                    { text: "Ask a community for help", weights: { social: 2, lead: 1 } }
                ]},
                { id: 'n3', text: "Ideally, your day is...", category: 'Routine', weights: { order: 2 }, options: [
                    { text: "Structured 9-5 with clear goals", weights: { order: 3 } },
                    { text: "Flexible, working when inspired", weights: { chaos: 2, art: 2 } },
                    { text: "Sprints of intense focus", weights: { tech: 1, logic: 1 } }
                ]},
                { id: 'n4', text: "You care most about...", category: 'Priorities', weights: {}, options: [
                    { text: "The user experience", weights: { art: 2, social: 2 } },
                    { text: "The code quality", weights: { tech: 2, logic: 2 } },
                    { text: "The business value", weights: { lead: 3, order: 1 } }
                ]},
                { id: 'n5', text: "In a meeting, you are...", category: 'Collaboration', weights: { social: 1 }, options: [
                    { text: "Taking detailed notes", weights: { order: 2, logic: 1 } },
                    { text: "Leading the conversation", weights: { lead: 3 } },
                    { text: "Doodling or coding on the side", weights: { art: 1, tech: 1 } }
                ]}
            ],
            careers: [
                { title: "Full Stack Developer", tags: ['tech', 'logic'], desc: "Building the digital infrastructure of tomorrow." },
                { title: "UX/UI Designer", tags: ['art', 'tech'], desc: "Blending empathy with pixel-perfect precision." },
                { title: "Product Manager", tags: ['lead', 'social', 'order'], desc: "Guiding chaos into shippable products." },
                { title: "Data Scientist", tags: ['logic', 'tech', 'order'], desc: "Finding truth in the noise of big data." },
                { title: "Creative Director", tags: ['art', 'lead'], desc: "Visionary leadership for aesthetic endeavors." },
                { title: "Cybersecurity Analyst", tags: ['tech', 'chaos', 'logic'], desc: "Thinking like a hacker to stop hackers." },
                { title: "Social Worker", tags: ['social', 'empathy'], desc: "Directly improving lives through connection." },
                { title: "Startup Founder", tags: ['lead', 'chaos', 'tech'], desc: "High risk, high reward, total ownership." },
                // NEW ROLES
                { title: "DevOps Engineer", tags: ['tech', 'order', 'chaos'], desc: "Automating the bridge between code and deployment." },
                { title: "Game Developer", tags: ['tech', 'art', 'logic'], desc: "Creating immersive worlds through code and physics." },
                { title: "Technical Writer", tags: ['tech', 'social', 'order'], desc: "Translating complex systems into human language." },
                { title: "QA Engineer", tags: ['tech', 'order', 'logic'], desc: "The last line of defense against bugs." },
                { title: "Blockchain Developer", tags: ['tech', 'chaos', 'logic'], desc: "Building decentralized trustless systems." },
                { title: "AR/VR Designer", tags: ['art', 'tech', 'chaos'], desc: "Crafting realities beyond the screen." },
                { title: "IT Project Manager", tags: ['lead', 'order', 'tech'], desc: "Keeping the technical ship sailing smooth." },
                { title: "Developer Advocate", tags: ['social', 'tech', 'lead'], desc: "The voice of the developer community." },
                { title: "AI Ethics Researcher", tags: ['logic', 'social', 'tech'], desc: "Ensuring our future overlords are nice." },
                { title: "Cloud Architect", tags: ['tech', 'order', 'lead'], desc: "Designing scalable systems in the sky." },
                { title: "Mobile Developer", tags: ['tech', 'art', 'logic'], desc: "Putting the world in people's pockets." },
                { title: "System Administrator", tags: ['tech', 'order', 'logic'], desc: "The silent guardian of uptime." },
                { title: "Marketing Technologist", tags: ['social', 'tech', 'art'], desc: "Where data meets storytelling." },
                { title: "Sales Engineer", tags: ['social', 'tech', 'lead'], desc: "Solving client problems with technical solutions." }
            ],
            eggs: [
                { id: 'konami', name: 'Konami Code', icon: 'ðŸŽ®', desc: 'Up Up Down Down...' },
                { id: 'logo_click', name: 'Logo Spinner', icon: 'ðŸŒ€', desc: 'You made it dizzy.' },
                { id: 'terminal_user', name: 'Hacker Voice', icon: 'ðŸ’»', desc: 'Accessed the terminal.' },
                { id: 'title_glitch', name: 'Glitch in the Matrix', icon: 'ðŸ’Š', desc: 'Found the unstable text.' },
                { id: 'spin_doctor', name: 'Spin Doctor', icon: 'ðŸ˜µ', desc: 'Found the hidden spinner.' },
                { id: 'stat_checker', name: 'Stat Nerd', icon: 'ðŸ“Š', desc: 'Checked the version number.' },
                { id: 'dev_tools', name: 'Inspector Gadget', icon: 'ðŸ•µï¸', desc: 'Opened the console.' },
                { id: 'tiny_window', name: 'Mobile Master', icon: 'ðŸ“±', desc: 'Resized to mobile view.' },
                { id: 'god_mode', name: 'God Mode', icon: 'ðŸ‘‘', desc: 'Unlocked all secrets.' },
                { id: 'time_traveler', name: 'Time Traveler', icon: 'â³', desc: 'Played past midnight.' },
                { id: 'copy_cat', name: 'Copy Cat', icon: 'ðŸ“‹', desc: 'Tried to copy text.' },
                { id: 'rage_click', name: 'Rage Clicker', icon: 'ðŸ–±ï¸', desc: 'Calm down there.' },
                { id: 'boss_mode', name: 'Boss Mode', icon: 'ðŸ’¼', desc: 'Looked busy.' }
            ]
        };

        // --- STATE MANAGEMENT ---
        const state = {
            scores: { art: 0, tech: 0, social: 0, logic: 0, lead: 0, chaos: 0, order: 0 },
            history: [],
            currentQIndex: 0,
            inventory: new Set(),
            startTime: Date.now(),
            clicks: 0
        };

        // --- APP CONTROLLER ---
        const app = {
            init: () => {
                app.renderBackground();
                app.checkTime();
                app.renderCareersGrid(); // Pre-render database
                
                // Global Key Listener
                document.addEventListener('keydown', eggHunt.handleKey);
                window.addEventListener('resize', eggHunt.handleResize);
                document.addEventListener('copy', () => eggHunt.collect('copy_cat'));
                document.addEventListener('click', () => {
                    state.clicks++;
                    if(state.clicks === 10) eggHunt.collect('rage_click');
                });

                // Console Egg
                console.log("%c STOP! ", "color: red; font-size: 50px; font-weight: bold;");
                console.log("%cIf you are looking for the secrets, try typing 'help()' in the terminal overlay.", "color: white; font-size: 14px;");
                
                // Counter Animation
                document.querySelectorAll('.counter').forEach(counter => {
                    const target = +counter.getAttribute('data-target');
                    const duration = 2000; 
                    const increment = target / (duration / 16);
                    let current = 0;
                    const update = () => {
                        current += increment;
                        if (current < target) {
                            counter.innerText = Math.ceil(current);
                            requestAnimationFrame(update);
                        } else {
                            counter.innerText = target;
                        }
                    };
                    update();
                });
            },

            navigate: (view) => {
                document.querySelectorAll('main > section').forEach(el => el.classList.add('hidden'));
                document.getElementById(`view-${view}`).classList.remove('hidden');
                window.scrollTo(0,0);
            },

            startQuiz: () => {
                state.scores = { art: 0, tech: 0, social: 0, logic: 0, lead: 0, chaos: 0, order: 0 };
                state.history = [];
                state.currentQIndex = 0;
                app.navigate('quiz');
                quiz.loadNext();
            },

            reset: () => {
                app.startQuiz();
            },

            renderCareersGrid: () => {
                const grid = document.getElementById('careers-grid');
                grid.innerHTML = DB.careers.map(c => `
                    <div class="glass p-6 rounded-xl border border-white/5 hover:border-blue-500/30 transition-all hover:-translate-y-1 group" data-tags="${c.tags.join(',')}">
                        <h3 class="font-bold text-lg mb-2 group-hover:text-blue-400 transition-colors">${c.title}</h3>
                        <p class="text-sm text-gray-400 mb-4">${c.desc}</p>
                        <div class="flex flex-wrap gap-2">
                            ${c.tags.map(t => `<span class="text-[10px] uppercase tracking-wider px-2 py-1 rounded bg-white/5 text-gray-500">${t}</span>`).join('')}
                        </div>
                    </div>
                `).join('');
            },

            filterDB: (filter) => {
                const cards = document.querySelectorAll('#careers-grid > div');
                const buttons = document.querySelectorAll('#db-filters button');
                
                // Update buttons
                buttons.forEach(b => {
                    if(b.innerText.toLowerCase().includes(filter) || (filter === 'all' && b.innerText === 'All')) {
                        b.classList.remove('bg-white/5', 'text-gray-300');
                        b.classList.add('bg-blue-600', 'text-white');
                    } else {
                        b.classList.add('bg-white/5', 'text-gray-300');
                        b.classList.remove('bg-blue-600', 'text-white');
                    }
                });

                // Filter cards
                cards.forEach(card => {
                    const tags = card.getAttribute('data-tags');
                    if(filter === 'all' || tags.includes(filter)) {
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                });
            },

            renderBackground: () => {
                const canvas = document.getElementById('neural-bg');
                const ctx = canvas.getContext('2d');
                let width, height, particles;

                const resize = () => {
                    width = canvas.width = window.innerWidth;
                    height = canvas.height = window.innerHeight;
                    particles = [];
                    for(let i=0; i<50; i++) {
                        particles.push({
                            x: Math.random() * width,
                            y: Math.random() * height,
                            vx: (Math.random() - 0.5) * 0.5,
                            vy: (Math.random() - 0.5) * 0.5,
                            size: Math.random() * 2
                        });
                    }
                };
                
                window.addEventListener('resize', resize);
                resize();

                const animate = () => {
                    ctx.clearRect(0, 0, width, height);
                    ctx.fillStyle = '#3b82f6';
                    ctx.strokeStyle = 'rgba(59, 130, 246, 0.1)';

                    particles.forEach((p, i) => {
                        p.x += p.vx;
                        p.y += p.vy;

                        if(p.x < 0 || p.x > width) p.vx *= -1;
                        if(p.y < 0 || p.y > height) p.vy *= -1;

                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                        ctx.fill();

                        // Connect
                        particles.forEach((p2, j) => {
                            if(i === j) return;
                            const dx = p.x - p2.x;
                            const dy = p.y - p2.y;
                            const dist = Math.sqrt(dx*dx + dy*dy);
                            if(dist < 150) {
                                ctx.beginPath();
                                ctx.moveTo(p.x, p.y);
                                ctx.lineTo(p2.x, p2.y);
                                ctx.stroke();
                            }
                        });
                    });
                    requestAnimationFrame(animate);
                };
                animate();
            },

            checkTime: () => {
                const hour = new Date().getHours();
                if(hour >= 0 && hour < 4) eggHunt.collect('time_traveler');
            },

            toggleInventory: () => {
                const modal = document.getElementById('inventory-modal');
                const grid = document.getElementById('inventory-grid');
                
                if(modal.classList.contains('hidden')) {
                    modal.classList.remove('hidden');
                    // Render Grid
                    grid.innerHTML = DB.eggs.map(egg => {
                        const unlocked = state.inventory.has(egg.id);
                        return `
                            <div class="aspect-square rounded-xl border ${unlocked ? 'border-blue-500 bg-blue-500/10' : 'border-white/5 bg-white/5'} flex flex-col items-center justify-center p-2 text-center transition-all hover:scale-105">
                                <div class="text-3xl mb-2 ${unlocked ? '' : 'grayscale opacity-20'}">${egg.icon}</div>
                                <div class="text-[10px] font-bold ${unlocked ? 'text-white' : 'text-gray-600'}">${unlocked ? egg.name : '???'}</div>
                                ${unlocked ? `<div class="text-[8px] text-blue-400 mt-1">${egg.desc}</div>` : ''}
                            </div>
                        `;
                    }).join('');
                    
                    setTimeout(() => {
                        modal.classList.remove('opacity-0');
                        modal.children[0].classList.remove('scale-95');
                    }, 10);
                } else {
                    modal.classList.add('opacity-0');
                    modal.children[0].classList.add('scale-95');
                    setTimeout(() => modal.classList.add('hidden'), 300);
                }
            }
        };

        // --- QUIZ ENGINE ---
        const quiz = {
            loadNext: () => {
                // Adaptive Logic: Pick question based on lowest confidence or random unasked
                const unasked = DB.questions.filter(q => !state.history.includes(q.id));
                
                if(unasked.length === 0 || state.history.length >= 10) { // Increased to 10 questions
                    quiz.finish();
                    return;
                }

                // Simple adaptive: Random for now
                const nextQ = unasked[Math.floor(Math.random() * unasked.length)];
                state.history.push(nextQ.id);
                
                quiz.render(nextQ);
            },

            render: (q) => {
                const card = document.getElementById('question-card');
                const text = document.getElementById('q-text');
                const cat = document.getElementById('q-category');
                const opts = document.getElementById('options-container');
                const prog = document.getElementById('progress-bar');
                const progText = document.getElementById('progress-text');
                const qId = document.getElementById('q-id');

                // Animate Out
                card.classList.add('opacity-0', 'translate-y-4');
                
                setTimeout(() => {
                    text.innerText = q.text;
                    cat.innerText = `// ${q.category.toUpperCase()}`;
                    qId.innerText = `ID: ${q.id.toUpperCase()}`;
                    
                    // Update Progress
                    const pct = Math.round((state.history.length / 10) * 100);
                    prog.style.width = `${pct}%`;
                    progText.innerText = `${pct}%`;

                    // Render Options
                    opts.innerHTML = q.options.map((opt, i) => `
                        <button onclick="quiz.answer(${i})" class="w-full text-left p-4 rounded-xl border border-white/10 hover:bg-white/5 hover:border-blue-500/50 transition-all group flex items-center justify-between">
                            <span class="group-hover:translate-x-2 transition-transform">${opt.text}</span>
                            <i class="fas fa-chevron-right opacity-0 group-hover:opacity-100 text-blue-500 transition-opacity"></i>
                        </button>
                    `).join('');

                    // Animate In
                    card.classList.remove('opacity-0', 'translate-y-4');
                }, 300);
            },

            answer: (optIndex) => {
                const currentQId = state.history[state.history.length - 1];
                const q = DB.questions.find(x => x.id === currentQId);
                const weights = q.options[optIndex].weights;

                // Update Scores
                for(let key in weights) {
                    if(state.scores[key] !== undefined) state.scores[key] += weights[key];
                }

                quiz.loadNext();
            },

            finish: () => {
                app.navigate('loading');
                setTimeout(() => {
                    app.navigate('results');
                    results.render();
                }, 2000);
            }
        };

        // --- RESULTS ENGINE ---
        const results = {
            render: () => {
                // Calculate Top Career
                const scores = state.scores;
                const matches = DB.careers.map(career => {
                    let score = 0;
                    career.tags.forEach(tag => {
                        score += (scores[tag] || 0);
                    });
                    return { ...career, score };
                }).sort((a, b) => b.score - a.score);

                // Render Top Match
                const top = matches[0];
                document.getElementById('archetype-name').innerText = top.title;
                document.getElementById('archetype-desc').innerText = top.desc;

                // Render List (Top 5 now)
                document.getElementById('career-matches').innerHTML = matches.slice(0, 5).map((m, i) => `
                    <div class="glass p-4 rounded-xl border border-white/5 flex items-center gap-4 hover:bg-white/5 transition-colors">
                        <div class="font-bold text-2xl text-gray-600">0${i+1}</div>
                        <div class="flex-grow">
                            <div class="font-bold text-lg">${m.title}</div>
                            <div class="text-xs text-gray-400">${m.desc}</div>
                        </div>
                        <div class="text-blue-400 font-mono font-bold">${Math.round(m.score * 10)}%</div>
                    </div>
                `).join('');

                // Render Chart
                const ctx = document.getElementById('radar-chart').getContext('2d');
                if(window.myChart) window.myChart.destroy();
                
                window.myChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Art', 'Tech', 'Social', 'Logic', 'Lead', 'Chaos'],
                        datasets: [{
                            label: 'Your Profile',
                            data: [scores.art, scores.tech, scores.social, scores.logic, scores.lead, scores.chaos],
                            backgroundColor: 'rgba(59, 130, 246, 0.2)',
                            borderColor: '#3b82f6',
                            pointBackgroundColor: '#fff'
                        }]
                    },
                    options: {
                        scales: {
                            r: {
                                angleLines: { color: 'rgba(255,255,255,0.1)' },
                                grid: { color: 'rgba(255,255,255,0.1)' },
                                pointLabels: { color: '#94a3b8' },
                                ticks: { display: false }
                            }
                        },
                        plugins: { legend: { display: false } }
                    }
                });

                // Confetti
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#3b82f6', '#a855f7', '#ffffff']
                });
            }
        };

        // --- EASTER EGG ENGINE ---
        const eggHunt = {
            konami: ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'],
            inputHistory: [],
            
            collect: (id) => {
                if(state.inventory.has(id)) return;
                state.inventory.add(id);
                
                // Update UI
                const btn = document.getElementById('egg-count');
                btn.innerText = state.inventory.size;
                btn.classList.remove('hidden');
                btn.classList.add('animate-bounce');

                // Toast
                const egg = DB.eggs.find(e => e.id === id);
                const toast = document.createElement('div');
                toast.className = 'egg-toast glass p-4 rounded-xl border-l-4 border-yellow-500 flex items-center gap-3 w-64 pointer-events-auto';
                toast.innerHTML = `
                    <div class="text-2xl">ðŸ¥š</div>
                    <div>
                        <div class="text-xs font-bold text-yellow-500 uppercase">Secret Found!</div>
                        <div class="font-bold text-sm">${egg.name}</div>
                    </div>
                `;
                document.getElementById('toast-container').appendChild(toast);
                
                setTimeout(() => toast.remove(), 4000);

                if(state.inventory.size === DB.eggs.length) eggHunt.collect('god_mode');
            },

            trigger: (id) => {
                eggHunt.collect(id);
            },

            handleKey: (e) => {
                eggHunt.inputHistory.push(e.key);
                if(eggHunt.inputHistory.length > 10) eggHunt.inputHistory.shift();
                
                if(JSON.stringify(eggHunt.inputHistory) === JSON.stringify(eggHunt.konami)) {
                    eggHunt.collect('konami');
                    document.body.setAttribute('data-theme', 'cyber');
                    alert("SYSTEM OVERRIDE: CYBER MODE ACTIVATED");
                }

                // Boss Mode
                if((e.metaKey || e.ctrlKey) && e.key === 'b') {
                    e.preventDefault();
                    const boss = document.getElementById('boss-mode');
                    boss.style.display = boss.style.display === 'none' ? 'block' : 'none';
                    if(boss.style.display === 'block') eggHunt.collect('boss_mode');
                }
                if(e.key === 'Escape') {
                    document.getElementById('boss-mode').style.display = 'none';
                }

                // Search Focus
                if((e.metaKey || e.ctrlKey) && e.key === 'k') {
                    e.preventDefault();
                    document.getElementById('global-search').focus();
                }
            },

            handleResize: () => {
                if(window.innerWidth < 380) eggHunt.collect('tiny_window');
            }
        };

        // --- TERMINAL ---
        const terminal = {
            toggle: () => {
                const el = document.getElementById('terminal-overlay');
                el.classList.toggle('open');
                if(el.classList.contains('open')) {
                    eggHunt.collect('terminal_user');
                    document.getElementById('terminal-input').focus();
                }
            },
            
            log: (msg) => {
                const out = document.getElementById('terminal-output');
                out.innerHTML += `<div>${msg}</div>`;
                out.scrollTop = out.scrollHeight;
            }
        };

        document.getElementById('terminal-input').addEventListener('keypress', (e) => {
            if(e.key === 'Enter') {
                const val = e.target.value.trim().toLowerCase();
                terminal.log(`<span class="text-blue-500">âžœ</span> ${val}`);
                e.target.value = '';

                if(val === 'help') {
                    terminal.log("Available commands: help, clear, whoami, sudo, exit, egg");
                } else if(val === 'clear') {
                    document.getElementById('terminal-output').innerHTML = '';
                } else if(val === 'whoami') {
                    terminal.log("guest@futurelink-v9");
                } else if(val === 'sudo') {
                    terminal.log("Permission denied. You didn't say the magic word.");
                } else if(val === 'egg') {
                    terminal.log("Try looking in the console...");
                } else if(val === 'exit') {
                    terminal.toggle();
                } else {
                    terminal.log(`Command not found: ${val}`);
                }
            }
        });

        // --- INIT ---
        window.addEventListener('load', app.init);

        // Expose for console hunters
        window.hack = () => {
            console.log("Nice try. But can you find the 'god_mode'?");
            return "Access Denied";
        };

    </script>
</body>
</html>
